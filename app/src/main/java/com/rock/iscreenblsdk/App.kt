package com.rock.iscreenblsdk

import android.app.Application
import android.content.Context
import com.rockstreamer.iscreensdk.di.contentModule
import com.rockstreamer.iscreensdk.di.networkModule
import com.rockstreamer.iscreensdk.di.viewModelModule
import com.rockstreamer.iscreensdk.utils.ISCREEN_SHAREDPREFERANCE
import com.rockstreamer.iscreensdk.utils.iScreenSDKInit
import com.rockstreamer.iscreensdk.utils.loginState
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.startKoin

class App: Application() {

    override fun onCreate() {
        super.onCreate()

        loginState = getSharedPreferences(ISCREEN_SHAREDPREFERANCE, Context.MODE_PRIVATE)
        iScreenSDKInit(apiToken = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Mzg1OTMzMiwicHJvdmlkZXJfaWQiOiJ3UGY2b1BzajVCSlVGSk1zSHpDZkhDIiwicm9sZSI6MCwidXNlcm5hbWUiOiIrODgwMTgxNjQ4OTAyNyIsInBsYXRmb3JtIjoiaXNjcmVlbiIsInN1YnNjcmliZSI6dHJ1ZSwicGFja2FnZUluZm8iOnsibmFtZSI6Ik1vbnRobHlTdWJzICggRXhwaXJlIG9uIDIwMjQtMTEtMTQgKSIsImRlc2NyaXB0aW9uIjoiTW9udGhseVN1YnMgKCBFeHBpcmUgb24gMjAyNC0xMS0xNCApIiwicHJpY2UiOiI4OSIsInVuaXQiOiJCRFQiLCJjb3VudHJ5Q29kZSI6IkJEIiwiY29sb3JDb2RlIjpudWxsLCJwcm9kdWN0SWQiOiJJU0NSRUVOX1NTTF9QTEFOXzEiLCJwYXltZW50TWV0aG9kVHlwZSI6InNzbGNvbW1lcnoiLCJleHBpcmVEYXRlIjoiMjAyNC0xMS0xNCJ9LCJpc1RWT0QiOnRydWUsInR2b2RFeHBpcmVEYXRlIjoiMjAyNC0xMS0xNCIsImlhdCI6MTcyOTA2MDc3NywiZXhwIjoxNzI5MTQ3MTc3fQ.RR7IRjFR_tUb9rrkc2hYHVpohQ4kABOTmneovs97Z1eLIZc3kQvr2N4f-DXNjd9WgSn-vGCPB2c0Rss0iDqkuiEZhU3scq_e5WofaToDvL-cqam9LsZbf8OdKOA_HQhfZL78XhfHZVOBV5cCqpPOnyKT77aYmeuj92A93NijQERKh6VT28Hrkq1NwmZoXds4_bnZBVAdaB9iOWbfG2fn_PgSRxK7Ga25IIguOC9JazWVKrKiMfdk-c4vvcDgXzzRkQbki8VAB4zyC-tOMy9lvbC6McSdVv0sVk0vVQhrGsuksHO1DdtG-tMedVC0dSeAgM-MXZRVTBJ7V3Vyrg0uS5P3wfaHlWC_ARScm2NF2_YRohSyHKqrg4875EJLCzqwbcGdEIJTR1m_V7Ki9TQAh46rUcDJ2vN-7qsTFm6nZfFpgvKgsRYd4PdlMYNwwrO4REtEwonW8a0NoUQPTw20kLGwvIaHnSIRCoxsdR5inltGGIJk1SKCA_bCjIksHqTyUdU9GTowFg-nDhntKBiigM4WIynhBWEi1_DTP0kpPGrnNztlXhdZDBdIZtHqcUwsm977wsgdHq3F8pp8dCfATP7szevwY-CE2lDnHI0qkXLDB1bS-higYQkNf_x7f1ykqPA401iHzQLTUqs9m4lUsYM8n7c9Q_c6JostVO4iFLU")
        startKoin {
            androidContext(this@App)
            modules(listOf(networkModule , contentModule , viewModelModule))
        }
    }
}