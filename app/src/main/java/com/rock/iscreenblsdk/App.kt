package com.rock.iscreenblsdk

import android.app.Application
import android.content.Context
import com.rockstreamer.iscreensdk.di.contentModule
import com.rockstreamer.iscreensdk.di.networkModule
import com.rockstreamer.iscreensdk.di.viewModelModule
import com.rockstreamer.iscreensdk.utils.ISCREEN_SHAREDPREFERANCE
import com.rockstreamer.iscreensdk.utils.iScreenSDKInit
import com.rockstreamer.iscreensdk.utils.loginState
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.startKoin

class App: Application() {

    override fun onCreate() {
        super.onCreate()

        loginState = getSharedPreferences(ISCREEN_SHAREDPREFERANCE, Context.MODE_PRIVATE)
        iScreenSDKInit(apiToken = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDE0OSwicHJvdmlkZXJfaWQiOiJNbjdaNnpXN2QyWkpLZktlSGJnOFZFNnNSMXoyIiwicm9sZSI6MCwidXNlcm5hbWUiOiIrODgwMTc3ODQ3NDMzMyIsInBsYXRmb3JtIjoiaXNjcmVlbiIsInN1YnNjcmliZSI6dHJ1ZSwicGFja2FnZUluZm8iOnsibmFtZSI6Ik1vbnRobHlTdWJzICggRXhwaXJlIG9uIDIwMjUtMDktMDkgKSIsImRlc2NyaXB0aW9uIjoiTW9udGhseVN1YnMgKCBFeHBpcmUgb24gMjAyNS0wOS0wOSApIiwicHJpY2UiOiI0NSIsInVuaXQiOiJCRFQiLCJjb3VudHJ5Q29kZSI6IkJEIiwiY29sb3JDb2RlIjpudWxsLCJwcm9kdWN0SWQiOiJJU0NSRUVOX1NTTF9QTEFOXzEiLCJwYXltZW50TWV0aG9kVHlwZSI6InNzbGNvbW1lcnoiLCJleHBpcmVEYXRlIjoiMjAyNS0wOS0wOSJ9LCJpc1RWT0QiOmZhbHNlLCJ0dm9kRXhwaXJlRGF0ZSI6IjE5NzAtMDEtMDEiLCJpYXQiOjE3NTQ4MjAzMjMsImV4cCI6MTc1NDkwNjcyM30.AEmjSqrVvJ3BdMianJg2HKT8_L0kmr7SF36DoPgSpDcTLRjYx87hHpW9wPfzEYFSfRnLr5KT9WNKFNsA5Amvz6hGB8trgwsknXJL1l5bIx4Y5UHyKQ1wRWiddb87NCSAXq3vBUg9Okhf7BmlZk_--Xbj1mLuksGw4rKS7PdmZQ8tJPHKqNrjtjR2HvYiiiZ0OVBEX3TVF8d-Ab-kge-elRF-IFAXAJFUWI_aql3EPpsLY3hoehXOaLJBlNI7NEGkMb3RuNvDi1Q-NErKBDH1PXBAtwYOGW4k6toM2wR9TcWUNdm0uwZi-o8_KdgyVDZZQmaVMt7Cp8sEo8vqjvnQBqrNL8AWG65gSFHzWlgEAurP_sYIrWeh5FB4T2Yjx7Kwtz4iywVZGtOo_b2f427q85Oc-R7r-fTBoCrzCAdy1EeInsWrA5Ca_Avf-OH1aylotzKMqyBDm_aoBTQ8waW9vztPgIPJYmjQH5bZrff0WOMH69nPTjCgRU41P2Cwm0mxaFJodfupVlFH6euBylbUnMyrR0Gyq30sZ7IBi1x5c2L2ge_w8CwK9krnsZgpm14CZKUi3xRK7Gmz4z8_-gJfJcN-F7E8ZloN7_xZOUfd_ftSGvBs3TBKYfmjxIqJK2Ns5Ts-sJq0CnwHiHL0hTCbZXLZuB0acV3K_Q3-LOe5Few")
        startKoin {
            androidContext(this@App)
            modules(listOf(networkModule , contentModule , viewModelModule))
        }
    }
}