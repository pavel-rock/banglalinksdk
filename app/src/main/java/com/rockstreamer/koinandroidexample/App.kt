package com.rockstreamer.koinandroidexample

import android.app.Application
import android.content.Context
import com.rockstreamer.iscreensdk.di.contentModule
import com.rockstreamer.iscreensdk.di.networkModule
import com.rockstreamer.iscreensdk.di.viewModelModule
import com.rockstreamer.iscreensdk.utils.ISCREEN_SHAREDPREFERANCE
import com.rockstreamer.iscreensdk.utils.iScreenSDKInit
import com.rockstreamer.iscreensdk.utils.loginState
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.startKoin

class App: Application() {

    override fun onCreate() {
        super.onCreate()
        loginState = getSharedPreferences(ISCREEN_SHAREDPREFERANCE, Context.MODE_PRIVATE)
        iScreenSDKInit(apiToken = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDEzMjAsInByb3ZpZGVyX2lkIjoiNzIzODQ3MjkzNDcyOTg0MzciLCJyb2xlIjowLCJ1c2VybmFtZSI6Iis4ODAxNzc4NDc0MzM0IiwicGxhdGZvcm0iOiJpc2NyZWVuIiwic3Vic2NyaWJlIjp0cnVlLCJwYWNrYWdlSW5mbyI6eyJuYW1lIjoiTW9udGhseVN1YnMgKCBFeHBpcmUgQXQgMjAyNC0wMi0yMCApIiwiZGVzY3JpcHRpb24iOiJNb250aGx5U3VicyAoIEV4cGlyZSBBdCAyMDI0LTAyLTIwICkiLCJwcmljZSI6IjI1IiwidW5pdCI6IkJEVCIsImNvdW50cnlDb2RlIjoiQkQiLCJjb2xvckNvZGUiOm51bGwsInByb2R1Y3RJZCI6IklTQ1JFRU5fU1NMX1BMQU5fMSIsInBheW1lbnRNZXRob2RUeXBlIjoic3NsY29tbWVyeiIsImV4cGlyZURhdGUiOiIyMDI0LTAyLTIwIn0sImlzVFZPRCI6dHJ1ZSwidHZvZEV4cGlyZURhdGUiOiIyMDI0LTAxLTI4IiwiaWF0IjoxNzA1OTEwOTExLCJleHAiOjE3MDU5OTczMTF9.Repkn4ymdoX68E7K6dEeuzyobauEl-FGooE97UGC_ykDF6qBmWXRnNrCBB1poRKAZ4aRrYEn65kBxSmWBLi67bLHWg4K70LuJZ-QuW4aGX9JScSnGAA_GgfCqoH6L9xktgRduoEOELwDYP_BtNd6Ho98iYezl1Q4kdyp0wAJxY43LU3zzOKEAIkogj-yDocRP8FJxcrWLvvz3fjWZwOOXxlRaYCM-xu9hYOc6gmMNvr5_p5IkfEVo8fjYhT9-gEuCzJ-ZRm_jef3Wub2-4Bm5SAE5fYEseAfe6bAC3R95WCm5f0rWLDqNHuNHHZiQxRp1gy6QVJ4vm5IXRm1CiggwS2A7jwnlseZWeNeZm_rYtPmHx1ZXwqmHXYRRFkRluIEtBNKT5bgvA7MBRRs3So0chO6FDq4khtJu70ysGfTze1eqDJN6QNcaxVLjK-9Ithyxc04Y6RliilOZXU48R-nqxW2S91OzC29IMr4q4CYC7GsuA8ip1mv1Hgk_cgAVxtwFkCYnm2REIqtPC6iID8d4mq9lW0wPYUyssiy9_SxW5u-hI7QjmVrhheyQvTXt9956n5i5yZI5Q5Z31WswZG0OPkPxf8zBq2G0Zybba-54g8t5dxN0WlMVONmA2Oc_IyDMPyC-VcvvRMuuM3XgLsGsavJyFnHudSdzPQbXlfdZ04")
        startKoin {
            androidContext(this@App)
            modules(listOf(networkModule , contentModule , viewModelModule))
        }
    }
}