package com.rockstreamer.koinandroidexample

import android.app.Application
import android.content.Context
import com.rockstreamer.iscreensdk.di.contentModule
import com.rockstreamer.iscreensdk.di.networkModule
import com.rockstreamer.iscreensdk.di.viewModelModule
import com.rockstreamer.iscreensdk.utils.ISCREEN_SHAREDPREFERANCE
import com.rockstreamer.iscreensdk.utils.iScreenSDKInit
import com.rockstreamer.iscreensdk.utils.loginState
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.startKoin

class App: Application() {

    override fun onCreate() {
        super.onCreate()
        loginState = getSharedPreferences(ISCREEN_SHAREDPREFERANCE, Context.MODE_PRIVATE)
        iScreenSDKInit(apiToken = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Mzg5Nzk1LCJwcm92aWRlcl9pZCI6IjEwNzkzOTUzMDA1NjcxMjc4NzQ3NyIsInJvbGUiOjAsInVzZXJuYW1lIjoibWl0cmFzdW1pdDA4QGdtYWlsLmNvbSIsInBsYXRmb3JtIjoiaXNjcmVlbiIsInN1YnNjcmliZSI6dHJ1ZSwicGFja2FnZUluZm8iOnsibmFtZSI6Ik1vbnRobHlTdWJzICggRXhwaXJlIEF0IDIwMjMtMTItMjggKSIsImRlc2NyaXB0aW9uIjoiTW9udGhseVN1YnMgKCBFeHBpcmUgQXQgMjAyMy0xMi0yOCApIiwicHJpY2UiOiI4NSIsInVuaXQiOiJJTlIiLCJjb3VudHJ5Q29kZSI6IklOIiwiY29sb3JDb2RlIjpudWxsLCJwcm9kdWN0SWQiOiJJU0NSRUVOX1JBWk9SUEFZX1BMQU5fMSIsInBheW1lbnRNZXRob2RUeXBlIjoicmF6b3JwYXkiLCJleHBpcmVEYXRlIjoiMjAyMy0xMi0yOCJ9LCJpYXQiOjE3MDExNzQ0MDQsImV4cCI6MTcwMTI2MDgwNH0.cRsIi_P2KO9t9iEte5P4N3J55J0DHBCs42_I3xX0wGAkE7NH98UeCfhjXYT8-xYJyIGAfmB8580xjMGGgGsY706waxGmSsnTTDK8y3DzpGdbcaFkXcrZiDIIl4i1cjqE0_WCM9rT6IQe73eSALD6rRNLn8V4wouDiMWO2mZ1gYoZ7pMtEPLzGdY4e77Oogt-Jp1aMFXd6tDf13KBA-7PElQJH3kp4oZVMiKibwE73YWMi6L7fuuOHb-clWrArmO9bS9-aJ64Qg22dSQS73IgP7Zt4RGkKWmzPY4QMxNUco5RWCTfmddnXHvIi47EHD0jGpVxRn3HJ3HFfi3qMEKxxn_4UtJbnPzo5NO7VTeqZeTBs4fJAj_9wEYn013sTGxRaOOrfpXwt9z7zZw7rZCggeS_V2MdA1ZrrWVBL5dHt85CHVs0f8p8F7ules5AGIVGLLb9hf4MVM4cDmxzglDt56L3ZK9GvL3cLz9D40ukydv_nJZ6qSlnvbMvu8OmL5XmbBbarb04y_AYGAmZ7QzSyKCs8XsqzL0EXO_0fA9AzkZSXGp75vZAQ_eqVWPmq-7Hl9U7y05MrQvdc91mcMXhb6dQx0MZI2Z7R_Zjdz_hYkwSaaW83mMG0Epqw-8hcbZMnPzSkIVDJblFq75ro-bYK17tH_3goXBjzzi6f-o3Pz8")
        startKoin {
            androidContext(this@App)
            modules(listOf(networkModule , contentModule , viewModelModule))
        }
    }
}